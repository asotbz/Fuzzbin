# Fuzzbin Configuration
# =======================
#
# Path Configuration:
# -------------------
# Fuzzbin uses two root directories:
#
# 1. config_dir: Configuration, database, caches, and thumbnails
#    - fuzzbin.db (video library database)
#    - .cache/ (HTTP response caches)
#    - .thumbnails/ (video thumbnails)
#    - backups/ (database backups)
#    - fuzzbin.log (when file logging is enabled)
#
# 2. library_dir: Video files, NFO metadata, and trash
#    - Organized media files (per organizer.path_pattern)
#    - <basename>.nfo files (one per video)
#    - artist.nfo files (one per artist directory)
#    - .trash/ (soft-deleted files)
#
# Environment Variables:
# ----------------------
# - FUZZBIN_CONFIG_DIR: Override config_dir path
# - FUZZBIN_LIBRARY_DIR: Override library_dir path
# - FUZZBIN_DOCKER=1: Use Docker defaults (/config, /music_videos)
#
# Defaults:
# ---------
# Docker (FUZZBIN_DOCKER=1):
#   config_dir: /config
#   library_dir: /music_videos
#
# Non-Docker:
#   config_dir: $HOME/Fuzzbin/config
#   library_dir: $HOME/Fuzzbin/music_videos
#
# Advanced Settings:
# ------------------
# This file contains only commonly-needed settings. For advanced configuration
# options (rate limiting, caching, timeouts, etc.), see docs/advanced-config.md
# =======================

# Logging configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
  level: INFO
  
  # Log format: json or text (default: json)
  # Use "text" for development, "json" for production
  format: json
  
  # File logging configuration
  file:
    # Enable logging to fuzzbin.log in config_dir (default: false)
    # Uses daily rotation with 7-day retention
    enabled: false

# API client configurations
# Environment variables take precedence over config file values.
apis:
  # IMVDb (Internet Music Video Database) API
  imvdb:
    auth:
      # API key (or set IMVDB_APP_KEY environment variable)
      app_key: YOUR_IMVDB_APP_KEY
  
  # Discogs API
  discogs:
    auth:
      # API credentials (or set DISCOGS_API_KEY and DISCOGS_API_SECRET environment variables)
      api_key: YOUR_DISCOGS_API_KEY
      api_secret: YOUR_DISCOGS_API_SECRET

  # Spotify Web API
  spotify:
    auth:
      # OAuth Client Credentials (recommended)
      # Get credentials from: https://developer.spotify.com/dashboard
      # Or set SPOTIFY_CLIENT_ID and SPOTIFY_CLIENT_SECRET environment variables
      client_id: YOUR_SPOTIFY_CLIENT_ID
      client_secret: YOUR_SPOTIFY_CLIENT_SECRET
      
      # Alternative: Manual access token (for testing only, expires in 1 hour)
      # access_token: YOUR_SPOTIFY_ACCESS_TOKEN

# yt-dlp configuration for YouTube video search and download
ytdlp:
  # Path to yt-dlp binary (default: "yt-dlp" from PATH)
  ytdlp_path: yt-dlp

  # Default format specification for downloads
  format_spec: "bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best"

  # Bypass geographic restrictions (default: false)
  geo_bypass: false

# ffprobe configuration for video file metadata extraction
ffprobe:
  # Path to ffprobe binary (default: "ffprobe" from PATH)
  ffprobe_path: ffprobe

  # Command execution timeout in seconds (default: 30)
  timeout: 30

# Thumbnail generation configuration
thumbnail:
  # Directory for cached thumbnails (relative to config_dir)
  cache_dir: ".thumbnails"

# NFO file handling configuration
nfo:
  # Write artist.nfo files in each {artist} directory (default: true)
  write_artist_nfo: true
  
  # Write <basename>.nfo files for each music video (default: true)
  write_musicvideo_nfo: true
  
  # Featured artist handling
  featured_artists:
    # Whether to append featured artists to artist or title field
    enabled: false
    
    # Field to append featured artists to: 'artist' or 'title'
    append_to_field: artist

# Media file organizer configuration
organizer:
  # Path pattern for organizing media files
  # Available fields: {artist}, {title}, {album}, {year}, {genre}, {director}, {studio}, {featured_artists}
  # 
  # Example patterns:
  #   - "{artist}/{title}" -> "Robin Thicke/Blurred Lines.mp4"
  #   - "{genre}/{artist}/{year}/{title}" -> "R&B/Robin Thicke/2013/Blurred Lines.mp4"
  path_pattern: "{artist}/{title}"
  
  # Whether to normalize filenames (lowercase, remove special chars)
  normalize_filenames: false

# Tag management configuration
tags:
  # Normalize tag names to lowercase for consistency (default: true)
  normalize: true
  
  # Automatic decade tag configuration
  auto_decade:
    # Enable automatic decade tag generation (default: true)
    enabled: true
    
    # Format string for decade tags (default: "{decade}s" -> "90s")
    # Must contain {decade} placeholder
    format: "{decade}s"

# Trash directory and automatic cleanup configuration
trash:
  # Directory for soft-deleted files (relative to library_dir)
  trash_dir: ".trash"
  
  # Enable automatic scheduled trash cleanup (default: true)
  enabled: true
  
  # Cron expression for cleanup schedule (default: daily at 3 AM)
  schedule: "0 3 * * *"
  
  # Delete items from trash older than this many days (default: 30)
  retention_days: 30

# Automatic backup configuration
backup:
  # Whether automatic scheduled backups are enabled (default: true)
  enabled: true
  
  # Cron expression for backup schedule (default: daily at 2 AM)
  schedule: "0 2 * * *"
  
  # Number of backup archives to retain (default: 7)
  retention_count: 7

# Automatic NFO export configuration
# Exports all video and artist NFO files from the database to disk on a schedule.
# Uses content hash comparison to skip writing files that haven't changed.
nfo_export:
  # Whether automatic scheduled NFO export is enabled (default: false)
  enabled: false
  
  # Cron expression for export schedule (default: daily at 4 AM)
  schedule: "0 4 * * *"
  
  # Skip exporting NFO files whose content hasn't changed (default: true)
  # Uses MD5 hash comparison - only writes files when content differs
  incremental: true
  
  # Include soft-deleted videos in export (default: false)
  include_deleted: false